{% load staticfiles %}

<!DOCTYPE html>
<html>
    <head>
        <title>File Details</title>

    <script src="{% static 'js/jquery-1.11.3.js'%}" ></script>
            <script src="{% static "js/likes.js" %}"></script>

    </head>

    <body>

 		<img src="{{  file.file_uploaded.url}}" width="400" height="400" alt="{{ image.image.name }}">
        <a href="{% url "likes-list" file.id %}"><b id="like_count{{file.id}}" class="popover">{{ file.likes_count }}</b> Users like this file</a>

    {% if user.is_authenticated %}
        {% if liked %}
            <h3 id="like-success{{file.id}}" class="success-message">You liked this file</h3>
            <button id="unlike{{file.id}}" data-fileid="{{file.id}}" class="unlike-btn" type="button">Unlike</button><br>
            <button id="like{{file.id}}" data-fileid="{{file.id}}" class="like-btn" type="button" hidden>Like</button><br>
        {% else %}
            <h3 id="like-success{{file.id}}" class="success-message" hidden>You liked this file</h3>
            <button id="unlike{{file.id}}" data-fileid="{{file.id}}" class="unlike-btn" type="button" hidden>Unlike</button><br>
            <button id="like{{file.id}}" data-fileid="{{file.id}}" class="like-btn" type="button">Like</button><br>
        {% endif %}
    {% endif %}
		<h2>Comments</h2>

		<ul>

		{% for comment in object_list %}

        Description = {{ comment.description }}
        <br>
        Date = {{ comment.date }}
        <br>
        Comment Posted By = {{ comment.user }}
        <br>

        {% if comment.user == user %}
        <form action="{% url 'delete-comment' comment.id %}" method="post"> {% csrf_token %}
        <input type="submit" value="Delete Comment"></input>
        </form>
        {% endif %}

        <hr>

		{% empty %}

    	<li>No Comments Currently Available.</li>

		{% endfor %}
		
		</ul>

        <br></br>

        <div class="pagination">
            <span class="page-links">
                {% if page_obj.has_previous %}
                    <a href="?page={{ page_obj.previous_page_number }}">Previous</a>
                {% endif %}
                <span class="page-current">
                    Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
                </span>
                {% if page_obj.has_next %}
                    <a href="?page={{ page_obj.next_page_number }}">Next</a>
                {% endif %}
            </span>
        </div>

        <br>

        <form action="{% url 'comment-list' file.id %}" method="post"> {% csrf_token %}

        <textarea name="description" style="width:500px;height:100px;"> </textarea>
        <br>
        <input type="submit" value="Add Comment"></input>

        </form>

        <br>

        <a href="{% url 'home' %}"> return to home page </a>

    </body>
</html>