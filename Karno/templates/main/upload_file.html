
<!DOCTYPE html>

{% load static %}
{% load staticfiles %}

    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
    <!--<link href="http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,300,700,600" rel="stylesheet" type="text/css">-->
    <link href="{% static 'css/font-awesome.min.css' %}" rel="stylesheet">
    <link href="{% static 'css/colorbox.css' %}" rel="stylesheet">
    <link href="{% static 'css/style.min.css' %}" rel="stylesheet">
    <link href="{% static 'css/responsive.min.css' %}" rel="stylesheet">

<script src="{% static 'js/jquery.min.js' %}"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="{% static 'js/bootstrap.min.js' %}"></script>
<script src="{% static 'js/jquery.easing.js' %}"></script>
<script src="{% static 'js/imagesloaded.pkgd.min.js' %}"></script>
<script src="{% static 'js/masonry.pkgd.min.js' %}"></script>
<script src="{% static 'js/jquery.colorbox.min.js' %}"></script>
<script src="{% static 'js/jquery.isotope.min.js' %}"></script>
<script src="{% static 'js/script.min.js' %}"></script>
<!---->
<script src="{% static "js/jquery.js" %}"></script>
<script src="{% static "js/main-jquery.js" %}"></script>
<script src="{% static 'js/jquery-1.11.3.js'%}" ></script>
<script src="//code.jquery.com/jquery-latest.min.js"></script>
<link href="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0/css/select2.min.css" rel="stylesheet" />
<script src="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0/js/select2.min.js"></script>

<link href="{% static 'css/select2.css'%}" rel="stylesheet"></link>
<link href="{% static 'css/extra.css'%}" rel="stylesheet"></link>
<link href="{% static 'css/upload_file.css'%}" rel="stylesheet"></link>


<html>
<head>
    <title>Share File</title>

</head>
<body>
<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="{% url "index" %}"><i class="fa fa-share-alt"> <span>Karno</span></i></a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="{% url "file-list" %}"><i class="fa fa-home"></i> Home</a></li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">Share <span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
                <li><a href="{% url 'upload' %}"><i class="fa fa-file"></i> File</a></li>
                <li><a href="{% url 'upload' %}"><i class="fa fa-youtube"></i> Video</a></li>
              </ul>
            </li>
            <li class="fsearch hidden-xs"><a class="btn-search"></a></li>
            {% if user.is_authenticated %}
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown"> <strong>{{ user.username }}</strong> <span class="caret"></span></a>
                <ul class="dropdown-menu" role="menu">
                  <li><a href="{% url 'profile' user.id %}"><i class="fa fa-user"></i> Profile</a></li>
                  <li><a href="{% url 'notification-list' user.id %}"> <i class="fa fa-flag"></i> Notifications</a></li>
                  <li><a href="/messages/"><i class="fa fa-inbox"></i> Messages</a></li>
                  <li class="divider"></li>
                  <li><a href="{% url 'user-manage' %}"><i class="fa fa-cog fa-spin"></i> Account Settings</a></li>
                  <li><a href="{% url 'user-logout' %}"><i class="fa fa-power-off"></i> Sign Out</a></li>
                </ul>
              </li>
            {% else %}
                <li><a href="{% url 'user-login' %}"><i class="fa fa-lock"></i> Signin</a></li>
                <li><a href="{% url 'user-new' %}"><i class="fa fa-edit"></i> Signup</a></li>
            {% endif%}


          </ul>
        </div><!-- /.navbar-collapse -->
        <ul class="nav navbar-nav navbar-right nav-search visible-xs">
          <li class="fsearch"><a class="btn-search"></a></li>
        </ul>
      </div><!-- /.container-fluid -->
    </nav>
    <!-- end:navbar -->

    <!-- begin:search -->
    <div id="searchbox">
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <!-- <form role="form"> -->
              <div class="form-group">
                <label for="inputSearch" class="sr-only">Search</label>
                <input type="text" class="form-control input-lg" placeholder="Enter your keyword">
              </div>
            <!-- </form> -->
          </div>
        </div>
      </div>
    </div>
    <!-- end:search -->

    <!-- begin:content -->
    <div id="content">
      <div class="container">
        <div class="row">
          <div class="col-md-4 col-sm-6 col-xs-10 col-md-offset-4 col-sm-offset-3 col-xs-offset-1">
            <div class="post-container">
              <div class="post-content">
                <div class="form-signin">
                  <div class="heading-title">
                    <h3><i class="fa fa-files-o"></i> Upload A File </h3>
                  </div>
                    <form class="form-horizontal" role="form" action="{% url "upload" %}" method="post" enctype="multipart/form-data">
                        {% csrf_token %}
                        <p>{{ form.non_field_errors }}</p>
                        <p>{{ form.file_uploaded.label_tag }} {{ form.file_uploaded.help_text }}</p>
                        <p>
                            {{ form.errors }}
                            {{ form.file_uploaded.errors }}
                            <input id="id_file_uploaded" name="file_uploaded" type="file" class="btn btn-primary btn-sm"/>
                            <input id="id_tempId" name="tempId" type="hidden">

                            <input  type="hidden" name="user" value={{ user.id }}>
                            <br><br>
                            <div id="image"></div>
                            Add Tags To Your File: <br>
                            {{form.tags}}
                            <br><br>
                            <br> Share With: <br>
                            Public:
                            <input id="id_public" name="public" type="checkbox" class="radio">
                            Registered Users:
                            <input id="id_registered_users" name="registered_users" type="checkbox" class="radio">
                            Group:
                            <input id="id_group" name="group" type="checkbox" class="radio" ><br><br>

                        </p>
                        <div id="hidden" class="hidden">
                        <h3> Select Users To Share File With </h3>
                        <select class="js-example-basic-multiple" multiple="multiple" size="100" name="users">
                        {% for user in users%}
                          <option value="{{user.id}}"> {{user.username}}</option>
                        {% endfor %}
                        </select>
                        </div>

                        <div id="audioform" class="audioform heading-title">

                          <h3><i class="fa fa-music"></i> Plonk more details to your audio </h3>
                            <div class="input-group">
                              <span class="input-group-addon"><i class="fa fa-info"></i></span>
                              <input id="id_audioform-title" name="audioform-title" type="text" placeholder="Title" class="form-control input-md">
                            </div>
                            <div class="input-group">
                              <span class="input-group-addon"><i class="fa fa-info"></i></span>
                              <input id="id_audioform-artist" name="audioform-artist" type="text" placeholder="Artist" class="form-control input-md">
                            </div>
                            <div class="input-group">
                              <span class="input-group-addon"><i class="fa fa-info"></i></span>
                              <input id="id_audioform-genre" name="audioform-genre" type="text" placeholder="Genre" class="form-control input-md">
                            </div>
                          
                          
                       <!-- {% for field in audioform.visible_fields %}
                        {{ field.errors }}
                        {{ field.name }}  {{ field }} <br><br>      
                        {% endfor %}  <br> </h6> -->

                        </div>
                        <p><input type="submit" value="Upload" class="btn btn-primary btn-sm"/></p> 
                    </form>
                </div>  
              </div>
            </div>
          </div>
          <!-- break -->          
        </div>
      </div>
    </div>
    <!-- end:content -->

    <!-- begin:footer -->
    <div class="footer">
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <hr>
          </div>
        </div>
        <div class="row">
          <div class="col-md-6 col-sm-6 col-xs-12">
            <p>Copyright &copy; 2014 All Right Reserved.</p>
            <ul class="list-inline">
                <li><a href="#">Terms Of Service</a></li>
                <li><a href="#">Privacy</a></li>
            </ul>
          </div>
          <div class="col-md-6 col-sm-6 col-xs-12">
            <ul class="list-social">
              <li><a href="#"><i class="fa fa-twitter"></i></a></li>
              <li><a href="#"><i class="fa fa-facebook"></i></a></li>
              <li><a href="#"><i class="fa fa-linkedin"></i></a></li>
              <li><a href="#"><i class="fa fa-google-plus"></i></a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>


<script type="text/javascript">
        $(document).ready( function() {
         $("#audioform").hide();
            $('input[type="file"]').change(function(){
                var filename = $('input[type=file]').val().replace(/C:\\fakepath\\/i, '')
                var extension = $('input[type=file]').val().split('.').pop();
                if(extension ==='mp3' || extension ==='ogg'  || extension ==='wav' || extension ==='mp4') {
                    $("#audioform").show();
                  }
                else {
                    $("#audioform").hide();
                }
            }) 

        });

        $(document).ready( function() {
            $('input[type="file"]').change(function(){
                var filename = $('input[type=file]').val().replace(/C:\\fakepath\\/i, '')
                var extension = $('input[type=file]').val().split('.').pop();
                if(extension ==='png' || extension ==='jpg'  || extension ==='jpeg' || extension ==='bmp') {
                        upload();       
                    }
                else {
                    $('#id_tempId').val(0)
                }
            }) 

        });

        function upload(event) {
            var data = new FormData($('form').get(0));

            $.ajax({
                url: '{% url "preview" %}',
                type: "POST",
                data: data,
                cache: false,
                processData: false,
                contentType: false,
                success: function(json) {
                    $('#image').prepend("<img src="+json.url+" height='200'>");
                    $('#id_tempId').val(json.tempId)
                },
                error: function(response) {
                    $('#image').prepend("<p>Failed to preview image</p>");
                }
            });
            }

</script>

</body>

</html>
    <script type="text/javascript">
      $('select').select2();

        $(document).ready(function() {
      $(".js-example-basic-single").select2();
        });

        $('input[type="checkbox"]').on('change', function() {
            $(this).siblings('input[type="checkbox"]').prop('checked', false);

            });

               $(document).ready(function(){
            $('input[type="checkbox"][name="group"').on('change', function(){
                if(this.checked){
                    $('div#hidden').removeClass("hidden");
                }
                else {
                    $('div#hidden').addClass("hidden");
                }
            });

            $('input[type="checkbox"][name="public"').on('change', function(){
                if(this.checked){
                    $('div#hidden').addClass("hidden");
                }
            });

            $('input[type="checkbox"][name="registered_users"').on('change', function(){
                if(this.checked){
                    $('div#hidden').addClass("hidden");
                }
            });
        });
    </script>


</body>


