{% load staticfiles %}
    <script src="//code.jquery.com/jquery-latest.min.js"></script>
<link href="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0/css/select2.min.css" rel="stylesheet" />
<script src="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0/js/select2.min.js"></script>

<link href="{% static 'css/select2.css'%}" rel="stylesheet"></link>
<link href="{% static 'css/extra.css'%}" rel="stylesheet"></link>


<html>
<head>
    <title>Share File</title>
    <style type="text/css">
    div.hidden {
        display: none;
    }

    .radio {
          -webkit-appearance: radio;
          box-sizing: border-box;
        }

    </style>
</head>
<body>
    <h1>Share A File</h1>
            <form id="myForm" action="" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <p>{{ form.non_field_errors }}</p>
            <p>{{ form.file_uploaded.label_tag }} {{ form.file_uploaded.help_text }}</p>
            <p>
                {{ form.file_uploaded.errors }}
                {{ form.file_uploaded }}
                <input  type="hidden" name="user" value={{ user.id }}>
                <br>
                <br> Share With: <br>
                Public:
                <input id="id_public" name="public" type="checkbox" class="radio">
                Registered Users:
                <input id="id_registered_users" name="registered_users" type="checkbox" class="radio">
                Group:
                <input id="id_group" name="group" type="checkbox" class="radio" ><br><br>
                Add Tags To Your File: <br>
                {{form.tags}}
                <br><br>
            </p>
                <div id="hidden" class="hidden">
                <h3> Select Users To Share File With </h3>
                <select class="js-example-basic-multiple" multiple="multiple" size="100" name="users">
                {% for user in users%}
                  <option value="{{user.id}}"> {{user.username}}</option>
                {% endfor %}
                </select>
                </div>
            <p><input type="submit" value="Upload" /></p>  
        </form>

    <script type="text/javascript">
      $('select').select2();

        $(document).ready(function() {
      $(".js-example-basic-single").select2();
        });

        $('input[type="checkbox"]').on('change', function() {
            $(this).siblings('input[type="checkbox"]').prop('checked', false);

            });

               $(document).ready(function(){
            $('input[type="checkbox"][name="group"').on('change', function(){
                if(this.checked){
                    $('div#hidden').removeClass("hidden");
                }
                else {
                    $('div#hidden').addClass("hidden");
                }
            });

            $('input[type="checkbox"][name="public"').on('change', function(){
                if(this.checked){
                    $('div#hidden').addClass("hidden");
                }
            });

            $('input[type="checkbox"][name="registered_users"').on('change', function(){
                if(this.checked){
                    $('div#hidden').addClass("hidden");
                }
            });
        });
    </script>


</body>


