<!DOCTYPE html>

{% load static %}

<script src="{% static "js/jquery.js" %}"></script>

<script src="{% static "js/main-jquery.js" %}"></script>
<script src="{% static 'js/jquery-1.11.3.js'%}" ></script>
<link href="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0/css/select2.min.css" rel="stylesheet" />
<script src="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0/js/select2.min.js"></script>
<html>
<head>
    <title>Share File</title>
    <style type="text/css">
    div.hidden {
        display: none;
    }
    select.hidden{
        display: none;
    }
    </style>
</head>
<body>
    <h1>Share A File</h1>



            <form id="myForm" action="" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <p>{{ form.non_field_errors }}</p>
            <p>{{ form.file_uploaded.label_tag }} {{ form.file_uploaded.help_text }}</p>
            <p>
                {{ form.file_uploaded.errors }}

                <input id="id_file_uploaded" name="file_uploaded" type="file">

                <input  type="hidden" name="user" value={{ user.id }}>
                <br>
                <br> Share With: <br>
                Public: {{form.public}}
                Registered Users: {{form.registered_users}}
                Group: {{form.group}}
                <br><br>

            </p>
                <div id="hidden" class="hidden">
                <h3> Select Users To Share File With </h3>
                <select class="js-example-basic-multiple" multiple="multiple" size="100" name="users">
                {% for user in users%}
                  <option value="{{user.id}}"> {{user.username}}</option>
                {% endfor %}
                </select>
                </div>

                <div id="audioform" class="audioform">

                  <h3> Plonk info to your audio </h3>
                {% for field in audioform.visible_fields %}
                {{ field.errors }}
                {{ field.name }}  {{ field }} <br><br>      
                {% endfor %}  <br> </h6>

                </div>
            <p><input type="submit" value="Upload" /></p> 

        </form>



<script type="text/javascript">
$(document).ready( function() {
 $("#audioform").hide();
    $('input[type="file"]').change(function(){
        var filename = $('input[type=file]').val().replace(/C:\\fakepath\\/i, '')
        var extension = $('input[type=file]').val().split('.').pop();
        if(extension ==='mp3' || extension ==='ogg'  || extension ==='wav' || extension ==='mp4') {
            $("#audioform").show();
          }
        else {
            $("#audioform").hide();
        }
    }) 

}); 
</script>

</body>

</html>
    <script type="text/javascript">
      $('select').select2();

        $(document).ready(function() {
      $(".js-example-basic-single").select2();
        });

        // $(document).ready(function(){
        // $('input[type="checkbox"][name="group"').click(function(){
        //      $('div#hidden').toggle(this.checked);
        //     });
        // });

        $('input[type="checkbox"]').on('change', function() {
            $(this).siblings('input[type="checkbox"]').prop('checked', false);
            });


        $(document).ready(function(){
    $('input[type="checkbox"][name="group"').change(function(){
        if(this.checked)
            $('div#hidden').fadeIn('slow');
        else
            $('div#hidden').fadeOut('slow');

            });
        });
    </script>


</body>


